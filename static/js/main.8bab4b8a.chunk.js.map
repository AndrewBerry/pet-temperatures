{"version":3,"sources":["components/Chart/Chart.js","components/Pet/Pet.js","components/Pet/PetContainer.js","hooks/useFirebaseDoc.js","components/App/App.js","components/App/AppLoading.js","index.js","components/App/AppContainer.js","hooks/useFirebaseInit.js"],"names":["Chart","temps","minTemp","Math","floor","reduce","m","t","min","h","l","maxTemp","ceil","max","range","width","length","hPoints","map","tempi","lPoints","tempPoints","reverse","tempPath","x","y","huPath","hu","parseFloat","i","className","viewBox","version","xmlns","xmlnsXlink","id","x1","x2","y1","y2","offset","stopColor","d","stroke","fill","strokeWidth","strokeDasharray","Pet","name","image","w","useState","timeAgo","setTimeAgo","useEffect","recalculateTimeAgo","ta","Date","intervalId","setInterval","clearInterval","humidity","parseInt","style","backgroundImage","PetContainer","petId","petData","docPath","data","setData","firebase","firestore","doc","onSnapshot","snapshot","error","console","useFirebaseDoc","App","AppLoading","initializeApp","apiKey","process","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","ReactDom","render","isInit","setIsInit","unsubscribe","auth","onAuthStateChanged","useFirebaseInit","document","getElementById"],"mappings":"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","file":"static/js/main.8bab4b8a.chunk.js","sourcesContent":["import React from \"react\";\nimport \"./Chart.css\";\n\nexport function Chart({ temps }) {\n  const minTemp = Math.floor(temps.reduce((m, t) => {\n    if (m === null) {\n      return Math.min(t.h, t.l);\n    }\n\n    return Math.min(t.h, t.l, m);\n  }, null) / 5) * 5;\n\n  const maxTemp = Math.ceil(temps.reduce((m, t) => {\n    if (m === null) {\n      return Math.max(t.h, t.l);\n    }\n\n    return Math.max(t.h, t.l, m);\n  }, null) / 5) * 5;\n\n  const range = maxTemp - minTemp;\n  const width = 125 / (temps.length - 1);\n\n  const hPoints = temps.map(({h}, tempi) => {\n    return [\n      width * tempi,\n      (1 - ((h - minTemp) / range)) * 50\n    ];\n  });\n\n  const lPoints = temps.map(({l}, tempi) => {\n    return [\n      width * tempi,\n      (1 - ((l - minTemp) / range)) * 50\n    ];\n  });\n\n  const tempPoints = [...hPoints, ...lPoints.reverse()];\n  const tempPath = `M0 0 ${tempPoints.map(([x, y]) => `L${x} ${y} `)}`;\n\n  const huPoints = temps\n    .map(({hu}, tempi) => {\n      return [\n        width * tempi,\n        50 - (parseFloat(hu) / 100 * 50)\n      ];\n    })\n  const huPath = huPoints\n    .map(([x, y], i) => `${i === 0 ? \"M\" : \"L\"}${x} ${y} `);\n\n  return (\n    <div className=\"Chart\">\n      <div className=\"Chart__tick\">{maxTemp}&deg;</div>\n      <div className=\"Chart__tick Chart__tick--min\">{minTemp}&deg;</div>\n\n      <svg className=\"Chart__img\" viewBox=\"0 0 125 50\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlnsXlink=\"http://www.w3.org/1999/xlink\">\n        <defs>\n          <linearGradient id=\"Gradient\" x1=\"0\" x2=\"0\" y1=\"0\" y2=\"1\">\n            <stop offset=\"0%\" stopColor=\"red\"/>\n            <stop offset=\"100%\" stopColor=\"blue\"/>\n          </linearGradient>\n        </defs>\n\n        <path d={tempPath} stroke=\"none\" fill=\"url(#Gradient)\" />  \n        <path d={huPath} strokeWidth=\"0.5\" stroke=\"white\" strokeDasharray=\"2 1\" fill=\"none\" />      \n      </svg>\n    </div>\n  );\n}\n","import React, { useEffect, useState } from \"react\";\nimport ta from \"s-ago\";\n\nimport \"./Pet.css\";\nimport { Chart } from \"../Chart/Chart\";\n\nexport function Pet({ name, image, temps }) {\n  const { w, l, h, hu } = temps[temps.length - 1];\n\n  const [ timeAgo, setTimeAgo ] = useState();\n  useEffect(() => {\n    function recalculateTimeAgo() {\n      setTimeAgo(ta(new Date(w)));\n    }\n\n    const intervalId = setInterval(recalculateTimeAgo, 15000);\n    recalculateTimeAgo();\n\n    return () => {\n      clearInterval(intervalId);\n    }\n  }, [ w ]);\n\n  const humidity = parseInt(hu);\n\n  return (\n    <div className=\"Pet\">\n      <div className=\"Pet__chart\">\n        <Chart temps={temps} />\n      </div>\n\n      <div className=\"Pet__details\">\n        <div className=\"Pet__image\" style={{backgroundImage: `url(${image})`}}></div>\n        <div className=\"Pet__name\">{name}</div>\n      </div>\n      <div className=\"Pet__meta\">{timeAgo}</div>\n\n      <div className=\"Pet__value Pet__value--low\">\n        <div className=\"Pet__valueTitle\">Low</div>\n        <div className=\"Pet__valueValue\">{l}<span className=\"Pet__valueUnit\">&deg;</span></div>\n      </div>\n      <div className=\"Pet__value Pet__value--high\">\n        <div className=\"Pet__valueTitle\">High</div>\n        <div className=\"Pet__valueValue\">{h}<span className=\"Pet__valueUnit\">&deg;</span></div>\n      </div>\n      <div className=\"Pet__value Pet__value--humidity\">\n        <div className=\"Pet__valueTitle\">Humidity</div>\n        <div className=\"Pet__valueValue\">{humidity}<span className=\"Pet__valueUnit Pet__valueUnit--small\">%</span></div>\n      </div>\n    </div>\n  );\n}\n","import React from \"react\";\nimport { useFirebaseDoc } from \"../../hooks/useFirebaseDoc\";\nimport { Pet } from \"./Pet\";\n\nexport function PetContainer({ petId }) {\n  const petData = useFirebaseDoc(`pets/${petId}`);\n\n  if (!petData) {\n    return <div>Loading pet...</div>;\n  }\n\n  return <Pet {...petData} />;\n}\n","import { useEffect, useState } from \"react\";\nimport firebase from \"firebase/app\";\n\nexport function useFirebaseDoc(docPath) {\n  const [ data, setData ] = useState(null);\n\n  useEffect(() => {\n    setData(null);\n\n    const docRef = firebase.firestore().doc(docPath);\n    return docRef.onSnapshot(\n      snapshot => {\n        setData(snapshot.data());\n      },\n      error => {\n        console.error(\"Error: \", error);\n      }\n    );\n  }, [ docPath ]);\n\n  return data;\n}\n","import React from \"react\";\nimport { PetContainer } from \"../Pet/PetContainer\";\n\nimport \"./App.css\";\n\nexport function App() {\n  return (\n    <div className=\"App\">\n      <PetContainer petId=\"cynthia\" />\n      <PetContainer petId=\"bassi\" />\n    </div>\n  );\n}\n","import React from \"react\";\n\nexport function AppLoading() {\n  return (\n    <div className=\"AppLoading\">\n      Loading...\n    </div>\n  );\n}\n","import React from \"react\";\nimport ReactDom from \"react-dom\";\nimport firebase from \"firebase/app\";\nimport \"firebase/auth\";\nimport \"firebase/firestore\";\n\nimport { AppContainer } from \"./components/App/AppContainer\";\n\nimport \"./index.css\";\n\nfirebase.initializeApp({\n  apiKey: process.env.REACT_APP_FIREBASE_API_KEY,\n  authDomain: process.env.REACT_APP_FIREBASE_AUTH_DOMAIN,\n  databaseURL: process.env.REACT_APP_FIREBASE_DATABASE_URL,\n  projectId: process.env.REACT_APP_FIREBASE_PROJECT_ID,\n  storageBucket: process.env.REACT_APP_FIREBASE_STORAGE_BUCKET,\n  messagingSenderId: process.env.REACT_APP_FIREBASE_MESSAGING_SENDER_ID,\n  appId: process.env.REACT_APP_FIREBASE_APP_ID\n});\n\nReactDom.render(<AppContainer />, document.getElementById(\"root\"));\n","import React from \"react\";\nimport { useFirebaseInit } from \"../../hooks/useFirebaseInit\";\n\nimport { App } from \"./App\";\nimport { AppLoading } from \"./AppLoading\";\n\nexport function AppContainer() {\n  const { isInit } = useFirebaseInit();\n\n  if (!isInit) {\n    return <AppLoading />;\n  }\n\n  return <App />;\n};\n","import { useEffect, useState } from \"react\";\nimport firebase from \"firebase/app\";\n\nexport function useFirebaseInit() {\n  const [isInit, setIsInit] = useState(false);\n\n  useEffect(() => {\n    const unsubscribe = firebase.auth().onAuthStateChanged(() => {\n      setIsInit(true);\n      unsubscribe();\n    });\n  }, []);\n\n  return {\n    isInit\n  };\n}\n"],"sourceRoot":""}